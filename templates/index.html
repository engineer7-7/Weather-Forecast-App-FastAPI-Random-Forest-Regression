<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Forecast App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            transition: background-color 0.4s, color 0.4s;
        }

        body.dark-mode {
            background-color: #121212 !important;
            color: #e0e0e0;
        }

        .dark-mode .container,
        .dark-mode .form-control,
        .dark-mode .card,
        .dark-mode input,
        .dark-mode .btn,
        .dark-mode .alert {
            background-color: #1e1e1e !important;
            color: #ffffff !important;
            border-color: #444 !important;
        }

        .dark-mode .text-muted {
            color: #bbbbbb !important;
        }

        .dark-mode .btn-primary {
            background-color: #0d6efd !important;
            border-color: #0d6efd !important;
        }

        .dark-mode .card-title,
        .dark-mode .card-body,
        .dark-mode .display-6,
        .dark-mode .text-secondary {
            color: #f1f1f1 !important;
        }

        .toggle-switch {
            position: absolute;
            top: 20px;
            right: 20px;
        }
    </style>
</head>
<body class="bg-light">

<!-- Dark mode toggle -->
<div class="toggle-switch form-check form-switch">
    <input class="form-check-input" type="checkbox" id="darkModeToggle">
    <label class="form-check-label" for="darkModeToggle">Dark Mode</label>
</div>

<div class="container mt-5">
    <div class="text-center mb-5">
        <h1 class="fw-bold">üå§Ô∏è Weather Forecast</h1>
        <p class="text-muted">Get the latest weather forecast for any city worldwide</p>
    </div>

    <form method="POST" action="/prediction" class="row justify-content-center mb-4">
        <div class="col-md-4 mb-2">
            <input type="text" class="form-control" name="city" placeholder="Enter city name" required>
        </div>
        <div class="col-md-4 mb-2">
            <input type="date" class="form-control" name="forecast_datetime" id="forecastDate" required>
        </div>
        <div class="col-md-2 mb-2">
            <button class="btn btn-primary w-100">Search</button>
        </div>
    </form>

    {% if prediction_celsius and prediction_fahrenheit %}
    <div class="card shadow mx-auto" style="max-width: 500px;">
        <div class="card-body text-center">
            <h3 class="card-title mb-3">{{ city }}</h3>

            <p class="display-6 mb-2">
                üå°Ô∏è {{ prediction_celsius }}
            </p>
            <p class="display-6 mb-2">
                üî• {{ prediction_fahrenheit }}
            </p>

            <p class="text-secondary mt-3">Forecast for: {{ forecast_datetime }}</p>
        </div>
    </div>
    {% elif forecast_datetime %}
    <div class="alert alert-warning text-center mt-4 mx-auto" style="max-width: 500px;">
        No prediction found for {{ city }} on {{ forecast_datetime }}. Please select another date.
    </div>
    {% endif %}
</div>

<!-- Bootstrap JS and Dark Mode Toggle Script -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Dark mode toggle
    const toggle = document.getElementById("darkModeToggle");
    const body = document.body;
    toggle.addEventListener("change", () => {
        body.classList.toggle("dark-mode");
    });

    // Date range: today ‚Üí today + 5 days
    const dateInput = document.getElementById("forecastDate");
    const today = new Date();
    const minDate = today.toISOString().split("T")[0];

    const maxDateObj = new Date();
    maxDateObj.setDate(today.getDate() + 5);
    const maxDate = maxDateObj.toISOString().split("T")[0];

    dateInput.setAttribute("min", minDate);
    dateInput.setAttribute("max", maxDate);
</script>
</body>
</html>
